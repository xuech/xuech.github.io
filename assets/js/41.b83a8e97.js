(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{555:function(t,e,r){"use strict";r.r(e);var v=r(6),a=Object(v.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"跨域"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#跨域"}},[t._v("#")]),t._v(" 跨域")]),t._v(" "),r("h3",{attrs:{id:"什么是跨域"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#什么是跨域"}},[t._v("#")]),t._v(" 什么是跨域？")]),t._v(" "),r("p",[t._v("浏览器出于安全考虑【什么安全？】有同源策略【什么策略】，当发现非同源HTTP请求时会拦截响应，Ajax 请求会失败【请求到底发没发出去？】。")]),t._v(" "),r("ul",[r("li",[t._v("CSRF攻击【跨站点请求伪造】："),r("a",{attrs:{href:"https://juejin.cn/post/6844903781704925191#heading-16",target:"_blank",rel:"noopener noreferrer"}},[t._v("详情"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("协议、域名、端口有一个不同就是跨域")]),t._v(" "),r("li",[t._v("请求发出去了，服务器也返回了相应了，只是浏览器拦截了响应")])]),t._v(" "),r("h3",{attrs:{id:"平时开发中遇到哪些跨域的情况"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#平时开发中遇到哪些跨域的情况"}},[t._v("#")]),t._v(" 平时开发中遇到哪些跨域的情况？")]),t._v(" "),r("ul",[r("li",[t._v("联调的时候会需要跨域，线上前端站点域和后台接口不一致也需要跨域，开发时跨域可以通过代理服务器来转发请求，因为跨域本身是浏览器对请求的限制，常见的跨域处理还有")])]),t._v(" "),r("h3",{attrs:{id:"怎么解决"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#怎么解决"}},[t._v("#")]),t._v(" 怎么解决？")]),t._v(" "),r("ul",[r("li",[t._v("jsonp\n"),r("ul",[r("li",[t._v("jsonp是浏览器会放过 img script标签引入资源的方式。所以可以通过后端返回一段执行js函数的脚本，将数据作为参数传入。然后在前端执行这段脚本。双方约定一个函数的名称。但是由于资源请求是get类型，请求参数长度有限制，也不能进行post请求。")])])]),t._v(" "),r("li",[t._v("cors【主流】\n"),r("ul",[r("li",[t._v("服务端设置"),r("code",[t._v("Access-Control-Allow-Origin")]),t._v("就可以开启 "),r("code",[t._v("CORS")]),t._v("，前端无需操作。")]),t._v(" "),r("li",[r("code",[t._v("CORS")]),t._v("需要后台配合设置HTTP响应头，非简单请求（对服务器有特殊要求的请求，比如请求方法是PUT或DELETE，或者Content-Type字段的类型是application/json）会先发送option预检请求，询问服务器当前网页所在的域名是否在服务器的"),r("strong",[t._v("许可名单")]),t._v("之中。只有得到肯定答复，浏览器才会发出正式的XMLHttpRequest请求，否则就报错。")]),t._v(" "),r("li",[r("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰 cors"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[t._v("通过服务器上nginx反向代理【最简单】")]),t._v(" "),r("li",[t._v("本地"),r("code",[t._v("webpack dev server")]),t._v("可以设置 "),r("code",[t._v("proxy")])]),t._v(" "),r("li",[t._v("websocket")])]),t._v(" "),r("h2",{attrs:{id:"proxy跨域的原理是什么"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#proxy跨域的原理是什么"}},[t._v("#")]),t._v(" proxy跨域的原理是什么?")]),t._v(" "),r("blockquote",[r("p",[t._v("proxy是webpack提供的代理服务，接收客户端发送的请求后转发给服务器【webpack-dev-server】")])]),t._v(" "),r("p",[t._v("在开发阶段，"),r("code",[t._v("webpack-dev-server")]),t._v("会启动一个本地开发服务器A，前端项目和A服务器就运行在了同一个端口上，所以不会出现跨域问题，然后A服务器再转发到目标服务器B【真实的后端API接口】拿到数据，最后再由代理服务器A将数据返回给本地，因为服务器之间调用是不存在跨域问题的。")]),t._v(" "),r("h2",{attrs:{id:"微信小程序有跨域问题吗"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序有跨域问题吗"}},[t._v("#")]),t._v(" 微信小程序有跨域问题吗？")]),t._v(" "),r("p",[t._v("不存在！调用wx.request时会把请求发到小程序后端，然后他们会去访问我们在微信中设置的域名白名单")])])}),[],!1,null,null,null);e.default=a.exports}}]);