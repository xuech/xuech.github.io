(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{579:function(a,s,t){"use strict";t.r(s);var e=t(6),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"脚手架从0到1的过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚手架从0到1的过程"}},[a._v("#")]),a._v(" 脚手架从0到1的过程")]),a._v(" "),t("h2",{attrs:{id:"_1、脚手架项目初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、脚手架项目初始化"}},[a._v("#")]),a._v(" 1、脚手架项目初始化")]),a._v(" "),t("ul",[t("li",[a._v("新建"),t("code",[a._v("medlog-cli-dev")]),a._v("项目文件\n"),t("code",[a._v("mkdir medlog-cli-dev & cd medlog-cli-dev")])]),a._v(" "),t("li",[a._v("安装"),t("code",[a._v("lerna")]),a._v(" "),t("code",[a._v("npm i -D lerna")]),a._v(" 和"),t("code",[a._v("npm i -g lerna")])]),a._v(" "),t("li",[a._v("初始化项目\n"),t("code",[a._v("lerna init")])])]),a._v(" "),t("h3",{attrs:{id:"修改lerna-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改lerna-json"}},[a._v("#")]),a._v(" 修改lerna.json")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"packages"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"packages/*"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.0.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 指定yarn")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"npmClient"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"yarn"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"useWorkspaces"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"workspaces"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"package/*"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h3",{attrs:{id:"yarn-install-完成依赖安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-install-完成依赖安装"}},[a._v("#")]),a._v(" yarn install 完成依赖安装")]),a._v(" "),t("h2",{attrs:{id:"_2、创建package"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、创建package"}},[a._v("#")]),a._v(" 2、创建package")]),a._v(" "),t("ul",[t("li",[a._v("创建package: "),t("code",[a._v("lerna create xxx")]),a._v(" "),t("ul",[t("li",[a._v("lerna create @medlog-cli-dev/init")])])]),a._v(" "),t("li",[a._v("链接依赖: "),t("code",[a._v("lerna link")])])]),a._v(" "),t("blockquote",[t("p",[a._v('"name": "@medlog-cli-dev/core", @符号后面就是我们在npm上创建的组织名称，‘/’后面是包名')])]),a._v(" "),t("h2",{attrs:{id:"_3、安装-清除依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装-清除依赖"}},[a._v("#")]),a._v(" 3、安装/清除依赖")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("lerna add axios --scope=@medlog-cli-dev/core: 将把axios这个包安装到package下的core模块中")])]),a._v(" "),t("li",[t("p",[a._v("lerna clean : 清除所有依赖")])]),a._v(" "),t("li",[t("p",[a._v("lerna bootstrap: 对所有的包统一进行依赖加载，前提是dependencies里有值")])])]),a._v(" "),t("h2",{attrs:{id:"_4、包与包之间的相互依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、包与包之间的相互依赖"}},[a._v("#")]),a._v(" 4、包与包之间的相互依赖")]),a._v(" "),t("p",[t("code",[a._v("lerna link")]),a._v("\neg: 如果core项目想引用utils项目中的内容怎么办？")]),a._v(" "),t("ol",[t("li",[a._v("先在core项目的package.json中添加utils的依赖"),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   # 这里的key就是我们在packages下的utils包名，版本号要和utils包中的version字段对应\n   # "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"@medlog-cli-dev/utils"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"^0.0.1"')]),a._v("\n   # "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"@medlog-cli-dev/utils"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"file: ../../utils.js"')]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),a._v(" "),t("li",[a._v("使用lerna link，我们发现在core项目的node_modules中会多出来一个带箭头的包（软链接）")])]),a._v(" "),t("h2",{attrs:{id:"_5、发布到npm上"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、发布到npm上"}},[a._v("#")]),a._v(" 5、发布到npm上")]),a._v(" "),t("ol",[t("li",[a._v("现在npm上创建一个名为"),t("code",[a._v("medlog-cli-dev")]),a._v("组织")]),a._v(" "),t("li",[a._v("在项目的根路径中添加"),t("code",[a._v("LICENSE.md")]),a._v("文件")]),a._v(" "),t("li",[a._v("需在每个包的package.json中添加"),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"publishConfig"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"access"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"public"')]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("4. 查看git仓库中tag版本号，如果仓库中当前tag为v0.0.2那么在发布时我们需要变更为v0.0.3\n5. 发布成功后我们可以到npm上查看包的发布情况")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);